@using System.Security.Claims
@model ArticleCategoryWithImgViewModel

@{
    ViewData["Title"] = "Add Article";
    Layout = "_MainLayout";
    SelectList Categories = new SelectList(Model.categories, "CategoryId", "CategoryName");
}

<section class="rounded-3">
    <div class="container d-flex flex-column flex-lg-row justify-content-between w-75 mx-auto">
        <div class="user-info-container d-flex flex-md-column align-items-center gap-4 justify-content-start p-3 border-bottom rounded-3 mb-4" style="background-color: rgba(255, 255, 255, 0.9); border: 1px solid rgba(140, 3, 30, 0.2); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); width: 320px;">
            <img src="/assets/download.jpeg" width="120px" class="rounded-circle shadow-sm border" alt="User Image" />

            <div class="user-details">
                <h2 class="h5 mb-1" style="color: #8C031E;">@User.FindFirst("Name")?.Value</h2>
                <span class="text-muted d-flex align-items-center gap-2" style="color: #6c757d;">
                    @User.FindFirst(ClaimTypes.Role)?.Value
                    <i class="fa-solid fa-certificate text-primary"></i>
                </span>
                <div class="mt-3">
                    <a class="btn btn-outline-secondary d-inline-flex align-items-center gap-2" asp-action="MyArticles" asp-controller="Article">
                        <i class="fa-solid fa-list"></i> My Articles
                    </a>
                </div>
            </div>
        </div>

        <div class="form-container w-100">
            <form method="post" enctype="multipart/form-data" class="shadow p-4 rounded bg-white border form-animate">
                <h2 class="h4 mb-4 text-center" style="color: #8C031E;">Add New Article</h2>

                <div class="mb-3">
                    <label asp-for="Title" class="form-label fw-semibold">Article Title</label>
                    <input class="form-control shadow-none rounded-2" asp-for="Title" placeholder="Enter the title">
                    <span class="text-danger" asp-validation-for="Title"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Content" class="form-label fw-semibold">Content</label>
                    <textarea class="form-control shadow-none rounded-2" asp-for="Content" placeholder="Enter the content"></textarea>
                    <span class="text-danger" asp-validation-for="Content"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="CatId" class="form-label fw-semibold">Categories</label>
                    <select class="form-control shadow-none rounded-2" asp-for="CatId" asp-items="Categories">
                        <option value="0">--Select Category--</option>
                    </select>
                    <span class="text-danger" asp-validation-for="CatId"></span>
                </div>

                <div class="form-group mb-3">
                    <label asp-for="FormFile" class="form-label fw-semibold">Article Image:</label>
                    <div class="d-flex gap-2">
                        <a class="btn btn-upload d-flex align-items-center gap-2 upload-btn" onclick="document.getElementById('fileInput').click();">
                            <i class="fas fa-upload"></i> Upload
                        </a>
                        <input asp-for="FormFile" type="file" id="fileInput" style="display: none;" onchange="displayFileName(this)" />
                        <small id="file-name" class="text-muted mt-2 d-block">No file chosen</small>
                    </div>
                </div>

                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-save shadow-sm px-5">Save <i class="fa-regular fa-floppy-disk"></i></button>
                </div>
            </form>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        function displayFileName(input) {
            const fileName = input.files[0]?.name || "No file chosen";
            document.getElementById('file-name').innerText = fileName;
        }
    </script>
    <script src="/lib/jquery/dist/jquery.js"></script>
    <script src="/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
}

<style>
    body {
        background: linear-gradient(to right, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.7));
    }

    .user-info-container {
        background-color: rgba(255, 255, 255, 0.9);
        border: 1px solid rgba(140, 3, 30, 0.2);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        width: 320px;
        transition: transform 0.3s, box-shadow 0.3s; 
    }

        .user-info-container:hover {
            transform: translateY(-5px) scale(1.03); 
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            background-color: rgba(255, 255, 255, 1); 
        }

    .form-container {
        flex-grow: 1;
    }

    .form-animate {
        transition: transform 0.8s, box-shadow 0.8s;
    }

        .form-animate:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

    .form-control:focus {
        border-color: #8C031E;
        box-shadow: 0 0 5px rgba(140, 3, 30, 0.5);
    }

    .btn-upload, .btn-save {
        background-color: #8C031E;
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }

        .btn-upload:hover, .btn-save:hover {
            background-color: #6f021a;
            box-shadow: 0px 4px 15px rgba(140, 3, 30, 0.3);
            color:white;
        }

    .btn:hover {
        box-shadow: 0px 4px 15px rgba(140, 3, 30, 0.3);
    }

    .form-control, .btn {
        transition: all 0.2s ease-in-out;
    }

    #file-name {
        font-style: italic;
        color: #6c757d;
    }

    .user-details h2 {
        font-weight: 600;
        color: #8C031E;
    }

    .user-details .text-muted {
        font-size: 0.9rem;
        color: #6c757d;
    }

    .shadow-sm {
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .rounded-circle {
        border-radius: 50%;
    }
</style>
